# webview冷启动
## 目的
- 本地 Webview 初始化都要不少时间，可以预先初始化好 Webview
## 首次预加载
- 在一个进程内首次初始化 Webview 与第二次初始化不同，首次会比第二次慢很多。
- 原因预计是 Webview 首次初始化后，即使 Webview 已经释放，但一些多 Webview 共用的全局服务或资源对象仍没有释放，第二次初始化时不需要再生成这些对象从而变快。
- 我们可以在 APP 启动时预先初始化一个 Webview 然后释放，这样等用户真正走到 H5 模块去加载 Webview时就变快了。
- Webview 池：可以用两个或多个 Webview 重复使用，而不是每次打开 H5 都新建 webview。不过这种方式要解决页面跳转时清空上一个页面，另外若一个 H5 页面上 JS 出现内存泄漏，就影响到其他页面，在 APP 运行期间都无法释放了。

# 预热
## 预加载数据
- 理想情况下离线包的方案第一次打开时所有HTML/JS/CSS 都使用本地缓存，无需等待网络请求，但页面上的用户数据还是需要实时拉，这里可以做个优化，
- 在 Webview 初始化的同时并行去请求数据，Webview初始化是需要一些时间的，这段时间没有任何网络请求，在这个时机并行请求可以节省不少时间。
- 可以在配置表注明某个离线包需要预加载的 URL，客户端在 Webview 初始化同时发起请求，请求由一个管理器管理，请求完成时缓存结果，
- 然后 Webview 在初始化完毕后开始请求刚才预加载的 URL，客户端拦截到请求，转接到刚才提到的请求管理器，若预加载已完成就直接返回内容，若未完成则等待。

