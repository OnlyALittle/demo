# CommonJS
## 在使用模块的时候是运行时同步加载的，模块可以多次加载，但只会在第一次加载，之后会被缓存引入的是缓存中的值
## 值相关
- 对于基本数据类型，属于复制。
- 对于复杂数据类型，属于浅拷贝。对该模块的值做修改时会影响另一个模块。
- 当使用require命令加载某个模块时，就会运行整个模块的代码。
- 当使用require命令加载同一个模块时，不会再执行该模块，而是取到缓存之中的值。
- CommonJS模块无论加载多少次，都只会在第一次加载时运行一次，以后再加载，就返回第一次运行的结果，除非手动清除系统缓存。
## 异步方式加载

# ES6模块
## ES6模块中的值属于【动态只读引用】。
- 不允许修改引入变量的值，import的变量是只读的。
- 当模块遇到import命令时，就会生成一个只读引用。等到脚本真正执行时，再根据这个只读引用，到被加载的那个模块里面去取值。
- 对于动态来说，原始值发生变化，import加载的值也会发生变化。不论是基本数据类型还是复杂数据类型。
- 循环加载时，ES6模块是动态引用。只要两个模块之间存在某个引用，代码就能够执行。

# 总结
- commonjs 值拷贝，es值引用
- commonjs 运行时加载，es编译时输出接口
- commonjs 单个值导出，es 可以多个
- commonjs 动态语法可以写在判断里，es 静态语法只能写在顶层
- commonjs this是window， es 是undefiend


# [CommonJS简单实现](../coding/commonjs.js)


# AMD
## 异步方式加载
- 用definde() 定义模块, 用require()加载模块


# CMD
## 异步方式加载
- AMD依赖前置，提前执行
- CMD依赖就近，延迟执行

# 区别
- AMD/CMD/CommonJs 是js模块化开发的规范，对应的实现是require.js/sea.js/Node.js
## 针对
- CommonJs 主要针对服务端，AMD/CMD/ES Module主要针对浏览器端
- 区别，
  - 服务器端一般采用同步加载文件，也就是说需要某个模块，服务器端便停下来，等待它加载再执行。
  - 而浏览器端要保证效率，需要采用异步加载，这就需要一个预处理，提前将所需要的模块文件并行加载好。
## AMD/CMD区别
- 都是并行加载js文件
- AMD是预加载，在并行加载js文件同时，还会解析执行该模块，这个模块的依赖模块需要先加载完成
- CMD是懒加载，虽然会一开始就并行加载js文件，但是不会执行，而是在需要的时候才执行。
## AMD/CMD的优缺点.一个的优点就是另一个的缺点， 可以对照浏览。
- AMD优点：加载快速，并行解析，同一时间可以解析多个文件。
- AMD缺点：并行加载，异步处理，加载顺序不一定，可能会造成一些困扰，甚至为程序埋下大坑。
- CMD优点：因为只有在使用的时候才会解析执行js文件，因此，每个JS文件的执行顺序在代码中是有体现的，是可控的。
- CMD缺点：CMD是使用时执行，没法利用空闲时间
## CommonJS 和 ES Module 区别：
- CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用



